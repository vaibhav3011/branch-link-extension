(this["webpackJsonpbranch-extension"]=this["webpackJsonpbranch-extension"]||[]).push([[0],{49:function(e,t,a){e.exports=a(84)},60:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),i=a.n(c),s=a(19),l=a(10),o=a(18),p=a(45),m="ADD_BRANCH_KEY",u="USER_LOGIN",d="SET_DOMAIN",h="SET_LINK",f="SET_LINK_OBJECT",b=Object(o.c)({branchKey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return t.type===m?t.payload:e},isLoggedIn:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;return t.type===u||e},linkObj:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{domain:"branch.app.link/"},t=arguments.length>1?arguments[1]:void 0;return t.type===d?Object.assign({},e,{domain:t.payload}):t.type===h?Object.assign({},e,{link:t.payload}):t.type===f?Object.assign({},e,t.payload):e}}),y=Object(o.e)(b,void 0,Object(o.d)(Object(o.a)(p.a),"object"===typeof window&&"undefined"!==typeof window.devToolsExtension?window.devToolsExtension():function(e){return e}));y.subscribe((function(){!function(e){try{var t=JSON.stringify(e);chrome.storage.sync.set({branchLinkState:t})}catch(a){}}(y.getState())}));var v=y,k=(a(58),a(59),a(60),a(17)),g=a(7),O=a(8),E=a(11),j=a(9),D=a(12),N=a(48),L=function(e){function t(){return Object(g.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(N.a)(t,["component"]);return r.a.createElement(s.c,Object.assign({},n,{render:function(t){return e.props.isLoggedIn?r.a.createElement(a,t):r.a.createElement(s.b,{to:"/"})}}))}}]),t}(n.Component),w=Object(l.b)((function(e){return{isLoggedIn:e.isLoggedIn}}))(L);function C(e){return{type:m,payload:e}}function K(){return{type:u}}var S=function(e){function t(){var e,a;Object(g.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(E.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(r)))).onDashboardLoginClick=function(){a.props.userLogin(),a.props.history.push("/add-key")},a}return Object(D.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this.props.isLoggedIn&&this.props.history.push("/add-key")}},{key:"render",value:function(){return r.a.createElement("div",{className:"p-sm-2"},r.a.createElement("div",{className:"col-sm-12 p-sm-3"},r.a.createElement("img",{alt:"Brand",src:"./logo-black.svg",className:"App-logo"})),r.a.createElement("div",{className:"col-sm-8 offset-sm-2"},r.a.createElement("img",{alt:"Landing",src:"./landing.svg",className:"w-100 App-landing-img"})),r.a.createElement("h3",{className:"col-sm-12 text-center"},"Branch Link Creator"),r.a.createElement("div",{className:"col-sm-12 p-sm-3 text-center"},"Branch links are mobile-optimized, marketing links they help you understand the source of your traffic and deliver the best user experience"),r.a.createElement("div",{className:"col-sm-12 p-sm-3 text-center"},r.a.createElement("button",{className:"btn btn-primary rounded-pill p-w-lg",onClick:this.onDashboardLoginClick},"Dashboard Login")))}}]),t}(n.Component),_=Object(l.b)((function(e){return{isLoggedIn:e.isLoggedIn}}),(function(e){return{userLogin:function(){e(K())}}}))(S),x=a(5),P=a(22),I=a.n(P),T=a(23);function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var B=function(e){function t(){return Object(g.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(O.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App-header"},r.a.createElement("div",{className:"row m-sm-0 p-sm-3"},r.a.createElement("div",{className:"col-sm-6 p-sm-0"},r.a.createElement("img",{alt:"Brand",src:"./logo-white.svg",className:"App-logo"})),r.a.createElement("div",{className:"col-sm-6 p-sm-0 text-right"},!!this.props.branchKey&&r.a.createElement(T.a,{to:"/change-key",style:{color:"#ffffff"}},r.a.createElement("span",null,"CHANGE KEY")),r.a.createElement("span",{className:"p-w-sm"},"|"),r.a.createElement("a",{style:{color:"#ffffff"},href:"https://docs.branch.io/links/integrate/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement("span",null,"HELP"))),r.a.createElement("div",{className:"col-sm-12 p-sm-5 h1 font-weight-light text-center"},this.props.title)))}}]),t}(n.Component),F=Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)}))(B),R=a(28);function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var G="addKey",$="changeKey",M="Add Branch Key",z=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(E.a)(this,Object(j.a)(t).call(this,e))).state={branchKey:e.branchKey},a.saveKeyAndGoToLinkCreate=a.saveKeyAndGoToLinkCreate.bind(Object(x.a)(a)),a.handleBranchKeyInputChange=a.handleBranchKeyInputChange.bind(Object(x.a)(a)),a.cancelChangeKey=a.cancelChangeKey.bind(Object(x.a)(a)),e.type===G&&e.branchKey?a.props.history.push("/link-create"):e.type===$&&(M="Change Branch Key"),a}return Object(D.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"saveKeyAndGoToLinkCreate",value:function(){var e=this,t={branch_key:this.state.branchKey};I.a.post("https://api.branch.io/v1/url",t).then((function(t){var a=t.data.url.split("/"),n={domain:a[a.length-2]};e.props.saveBranchKey(e.state.branchKey),e.props.setDomain(n),e.setState({createKeySuccess:!0}),setTimeout((function(){e.props.history.push("/link-create")}),2e3)}),(function(t){e.setState({createKeyFail:!0}),setTimeout((function(){e.setState({createKeyFail:!1})}),2e3)}))}},{key:"handleBranchKeyInputChange",value:function(e){this.setState({branchKey:e.target.value})}},{key:"cancelChangeKey",value:function(){this.props.type===$&&this.props.history.push("/link-create")}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(F,{title:M}),r.a.createElement("div",{className:"col-sm-10 offset-1 p-0 position-relative"},r.a.createElement("input",{onChange:this.handleBranchKeyInputChange,value:this.state.branchKey,style:{top:"-20px"},type:"text",name:"branch-key",className:"form-control position-absolute text-center",placeholder:"Place your public Branch key (key_live_...)"})),r.a.createElement("div",{className:"col-sm-12 text-center p-h-xl"},this.state.createKeySuccess&&r.a.createElement("div",{className:"action-success rounded-pill"},r.a.createElement("i",{className:"fa fa-check"}),"Key successfully saved")),r.a.createElement("div",{className:"col-sm-12 text-center p-h-sm",style:{color:"red"}},this.state.createKeyFail&&r.a.createElement("span",null,"Invalid branch key")),r.a.createElement("div",{className:"col-sm-12 text-right p-h-m"},r.a.createElement("button",{className:"btn btn-outline-primary rounded-pill p-w-m",onClick:this.cancelChangeKey},"Cancel"),r.a.createElement("button",{onClick:this.saveKeyAndGoToLinkCreate,style:{marginLeft:"20px"},className:"btn btn-primary rounded-pill p-w-m",disabled:!this.state.branchKey},"Save key")))}}]),t}(n.Component),J=Object(R.a)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)}),(function(e){return{saveBranchKey:function(t){e(C(t))},setDomain:function(t){e(function(e){return{type:d,payload:"".concat(e.domain,"/")}}(t))}}}))(z),H=a(47);function V(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var W={top:"-20px",background:"#fff"},Y=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(E.a)(this,Object(j.a)(t).call(this,e))).state={flags:{link_created:!1,edit_clicked:!1},linkData:{alias:"",campaign:"",channel:"",$desktop_url:"",data:[{key:"$web_only",val:!0}]}},a.updateFormRootInput=a.updateFormRootInput.bind(Object(x.a)(a)),a.saveLink=a.saveLink.bind(Object(x.a)(a)),a.updateLinkData=a.updateLinkData.bind(Object(x.a)(a)),a.openEditForm=a.openEditForm.bind(Object(x.a)(a)),a.cancelEditForm=a.cancelEditForm.bind(Object(x.a)(a)),a.handleLinkDataUpdate=a.handleLinkDataUpdate.bind(Object(x.a)(a)),a}return Object(D.a)(t,e),Object(O.a)(t,[{key:"updateFormRootInput",value:function(e){var t=this.state.linkData;t[e.target.name]=e.target.value,this.setState({linkData:t})}},{key:"handleLinkDataUpdate",value:function(e){if(e.target.className.indexOf("deeplink")>=0){var t=this.state.linkData.data;t[e.target.dataset.id][e.target.name]=e.target.value;var a=this.state.linkData;a.data=t,this.setState({linkData:a})}else{var n=this.state.linkData;n[e.target.name]=e.target.value,this.setState({linkData:n})}e.preventDefault()}},{key:"saveLink",value:function(){var e=this,t=this.convertDisplayDataToLinkData(this.state.linkData);t.branch_key=this.props.branchKey,I.a.post("https://api.branch.io/v1/url",t).then((function(t){if(t.data.url){var a=e.state.flags;a.link_created=!0,e.setState({flags:a}),e.props.saveBranchLink(t.data.url)}}),(function(e){console.log("Link create err")}))}},{key:"updateLinkData",value:function(){var e=this,t=this.convertDisplayDataToLinkData(this.state.linkData);t.branch_key=this.props.branchKey,t.branch_secret="secret_live_RrrsLqpzVcoVWf5t4ncQVpzlg2pRpGH9",delete t.alias,I.a.put("https://api.branch.io/v1/url?url=".concat(this.props.linkObj.link),t).then((function(t){if(t.data){var a=e.state.flags;a.edit_clicked=!1,e.setState({flags:a})}}),(function(e){console.log("Link create err")}))}},{key:"openEditForm",value:function(){this.fetchLinkAndSetState(this.props.linkObj.link);var e=this.state.flags;e.edit_clicked=!0,this.setState({flags:e})}},{key:"addDeeplinkData",value:function(){var e=this.state.linkData;e.data.push({key:"",val:""}),this.setState({linkData:e})}},{key:"cancelEditForm",value:function(){var e=this.state.flags;e.edit_clicked=!1,this.setState({flags:e})}},{key:"fetchLinkAndSetState",value:function(e){var t=this;I.a.get("https://api.branch.io/v1/url?url=".concat(e,"&branch_key=").concat(this.props.branchKey)).then((function(e){var a=t.convertLinkDataToDisplayData(e.data),n=Object.assign({},t.state.linkData,a);t.setState({linkData:n})}),(function(e){console.log("Link read err")}))}},{key:"convertLinkDataToDisplayData",value:function(e){delete e.data["+url"],delete e.data["~creation_source"],delete e.data.url,delete e.data["~id"];var t=Object.keys(e.data),a=[];return t.forEach((function(t){a.push({key:t,val:e.data[t]})})),Object.assign({},e,{data:a})}},{key:"convertDisplayDataToLinkData",value:function(e){var t={alias:e.alias,campaign:e.campaign,channel:e.channel,data:{}};return e.data.forEach((function(e){e.key&&void 0!==e.val&&null!==e.val&&(t.data[e.key]=e.val)})),t.data.$desktop_url=e.$desktop_url,t}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(F,{title:"Link Creator"}),r.a.createElement("div",{className:"col-sm-10 offset-1 p-0 position-relative"},r.a.createElement("div",{style:W,className:"row col-sm-12 shadow rounded position-absolute p-0 m-0"},r.a.createElement("div",{className:"col-sm-5 rounded-left",style:{background:"#fafafa"}},r.a.createElement("div",{style:{color:"#bdbdbd"}},"Domain"),r.a.createElement("div",{style:{color:"#0075c9"}},this.props.linkObj.domain)),r.a.createElement("div",{className:"col-sm-7"},r.a.createElement("div",{style:{color:"#bdbdbd"}},"Alias"),r.a.createElement("input",{onChange:this.updateFormRootInput,value:this.state.linkData.alias,type:"text",name:"alias",className:"border-0 bg-white",placeholder:"h34jfkd4",disabled:this.state.flags.link_created})))),r.a.createElement("div",{className:"col-sm-12 text-center",style:{marginTop:"2.55rem"}}),r.a.createElement("div",{className:"row m-0"},this.state.flags.link_created&&r.a.createElement("div",{className:"col-sm-10 offset-sm-1 text-right p-h-m",style:{color:"#757575"}},r.a.createElement("i",{style:{fontSize:"1.5rem"},className:"fa fa-edit p-w-m cursor-pointer",onClick:function(){return e.openEditForm()}}),r.a.createElement(H.CopyToClipboard,{text:this.props.linkObj.link,onCopy:function(){var t=e.state.flags;t.copied=!0,e.setState({flags:t}),setTimeout((function(){t.copied=!1,e.setState({flags:t})}),2e3)}},r.a.createElement("i",{style:{fontSize:"1.5rem"},className:"fa fa-copy cursor-pointer"}))),this.state.flags.link_created&&this.state.flags.copied&&r.a.createElement("div",{className:"col-sm-12 text-center"},r.a.createElement("div",{className:"action-success rounded-pill"},r.a.createElement("i",{className:"fa fa-check"}),"Link copied successfully"))),r.a.createElement("div",{className:"col-sm-10 offset-1"},r.a.createElement("div",{className:"p-h-sm form-label"},"Link name"),r.a.createElement("input",{onChange:this.updateFormRootInput,value:this.state.linkData.$desktop_url,type:"url",name:"$desktop_url",className:"form-control",placeholder:"Paste a web url"})),this.state.flags.edit_clicked&&r.a.createElement("div",{className:"row col-sm-10 offset-sm-1 p-0"},r.a.createElement("div",{className:"col-sm-12 p-h-m"},r.a.createElement("label",{className:"form-label"},"Link Alias"),r.a.createElement("input",{type:"text",className:"form-control",disabled:!0,value:this.props.linkObj.link})),r.a.createElement("h5",{className:"col-sm-12"},"Analytics Tag"),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("label",{className:"form-label"},"Channel"),r.a.createElement("input",{type:"text",className:"form-control",name:"channel",value:this.state.linkData.channel,onChange:this.handleLinkDataUpdate})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("label",{className:"form-label"},"Campaign"),r.a.createElement("input",{type:"text",className:"form-control",name:"campaign",value:this.state.linkData.campaign,onChange:this.handleLinkDataUpdate})),r.a.createElement("h5",{className:"col-sm-12 m-0",style:{paddingTop:"2rem",paddingBottom:"1rem"}},"Deeplink Data"),r.a.createElement("div",{className:"col-sm-12 row"},r.a.createElement("div",{className:"col-sm-6 form-label"},"Key"),r.a.createElement("div",{className:"col-sm-6 p-h-sm form-label"},"Value")),this.state.linkData.data.map((function(t,a){var n="key-".concat(a),c="val-".concat(a);return r.a.createElement("div",{className:"row m-0 p-h-sm",key:a},r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{"data-id":a,name:"key",id:n,type:"text",className:"form-control deeplink",value:t.key,onChange:e.handleLinkDataUpdate})),r.a.createElement("div",{className:"col-sm-6"},r.a.createElement("input",{"data-id":a,name:"val",id:c,type:"text",className:"form-control deeplink",value:t.val,onChange:e.handleLinkDataUpdate})))})),r.a.createElement("div",{className:"col-sm-12 p-h-sm text-center"},r.a.createElement("button",{className:"btn btn-outline-info",onClick:function(){return e.addDeeplinkData()}},"Add Deeplink data"))),this.state.flags.edit_clicked&&r.a.createElement("div",{className:"col-sm-10 offset-sm-1 text-right p-h-m"},r.a.createElement("button",{className:"btn btn-outline-primary rounded-pill p-w-m",onClick:this.cancelEditForm},"Cancel"),r.a.createElement("button",{onClick:this.updateLinkData,style:{marginLeft:"20px"},className:"btn btn-primary rounded-pill p-w-m"},"Save Link")),!this.state.flags.link_created&&r.a.createElement("div",{className:"col-sm-10 offset-sm-1 text-right p-h-m"},r.a.createElement("button",{className:"btn btn-outline-primary rounded-pill p-w-m"},"Cancel"),r.a.createElement("button",{onClick:this.saveLink,style:{marginLeft:"20px"},className:"btn btn-primary rounded-pill p-w-m",disabled:!this.state.linkData.alias||!this.state.linkData.$desktop_url},"Save Link")))}}]),t}(n.Component),q=Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?V(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):V(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)}),(function(e){return{saveBranchLink:function(t){e(function(e){return{type:h,payload:e}}(t))}}}))(Y);a(82),a(83);function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var X=function(){return r.a.createElement("h1",null,"404")},Z=function(e){function t(){return Object(g.a)(this,t),Object(E.a)(this,Object(j.a)(t).apply(this,arguments))}return Object(D.a)(t,e),Object(O.a)(t,[{key:"componentDidMount",value:function(){var e=this;new Promise((function(e,t){try{chrome.storage.sync.get(["branchLinkState"],(function(a){null===a.branchLinkState&&t(),e(JSON.parse(a.branchLinkState))}))}catch(a){t("err")}})).then((function(t){e.props.overrideState(t),e.props.isLoggedIn&&(e.props.branchKey?e.props.history.push("/link-create"):e.props.history.push("/add-key"))})).catch((function(e){}))}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s.e,null,r.a.createElement(s.c,{exact:!0,path:"/",component:_}),r.a.createElement(w,{path:"/add-key",component:function(e){return r.a.createElement(J,Object.assign({},e,{type:"addKey"}))}}),r.a.createElement(w,{path:"/change-key",component:function(e){return r.a.createElement(J,Object.assign({},e,{type:"changeKey"}))}}),r.a.createElement(w,{path:"/link-create",component:q}),r.a.createElement(s.c,{component:X})))}}]),t}(n.Component),ee=Object(l.b)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(a,!0).forEach((function(t){Object(k.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e)}),(function(e){return{overrideState:function(t){var a;t.branchKey&&e(C(t.branchKey)),t.isLoggedIn&&e(K()),e((a=t.linkObj,{type:f,payload:a}))}}}))(Object(s.h)(Z));i.a.render(r.a.createElement(s.a,null,r.a.createElement(l.a,{store:v},r.a.createElement(ee,null))),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.1a316de1.chunk.js.map